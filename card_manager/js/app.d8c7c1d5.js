(function(t){function e(e){for(var n,o,i=e[0],u=e[1],l=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&p.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(t[n]=u[n]);s&&s(e);while(p.length)p.shift()();return c.push.apply(c,l||[]),a()}function a(){for(var t,e=0;e<c.length;e++){for(var a=c[e],n=!0,i=1;i<a.length;i++){var u=a[i];0!==r[u]&&(n=!1)}n&&(c.splice(e--,1),t=o(o.s=a[0]))}return t}var n={},r={app:0},c=[];function o(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=n,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(a,n,function(e){return t[e]}.bind(null,n));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=e,i=i.slice();for(var l=0;l<i.length;l++)e(i[l]);var s=u;c.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"01e8":function(t,e,a){"use strict";a("86cf")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),r=Object(n["createTextVNode"])("ME. Card Manager"),c=Object(n["createTextVNode"])("Help ?");function o(t,e,a,o,i,u){var l=Object(n["resolveComponent"])("el-col"),s=Object(n["resolveComponent"])("el-button"),d=Object(n["resolveComponent"])("el-popover"),p=Object(n["resolveComponent"])("el-row"),b=Object(n["resolveComponent"])("el-header"),f=Object(n["resolveComponent"])("output-info"),h=Object(n["resolveComponent"])("card-ratio"),m=Object(n["resolveComponent"])("ExpectedOutput"),O=Object(n["resolveComponent"])("activation-record"),j=Object(n["resolveComponent"])("el-main"),v=Object(n["resolveComponent"])("el-container");return Object(n["openBlock"])(),Object(n["createBlock"])(v,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{span:20},{default:Object(n["withCtx"])((function(){return[r]})),_:1}),Object(n["createVNode"])(l,{span:4,style:{"text-align":"right","line-height":"60px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(d,{placement:"bottom",title:i.helpInfo.title,width:200,trigger:"click",content:i.helpInfo.content},{reference:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{type:"text",style:{color:"#ededed"}},{default:Object(n["withCtx"])((function(){return[c]})),_:1})]})),_:1},8,["title","content"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(j,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{gutter:16},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{span:24,lg:12,xl:16},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{gutter:16},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{span:24,sm:12},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{arData:i.arData,style:{height:"430px"}},null,8,["arData"])]})),_:1}),Object(n["createVNode"])(l,{span:24,sm:12,class:"top-gutter-xs"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{arData:i.arData,style:{height:"430px"}},null,8,["arData"])]})),_:1})]})),_:1}),Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(l,{span:24,class:"top-gutter"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{arData:i.arData,height:416},null,8,["arData"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(l,{span:24,lg:12,xl:8,class:"top-gutter-sm"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{arData:i.arData,onChangeData:u.update,style:{height:"860px"}},null,8,["arData","onChangeData"])]})),_:1})]})),_:1})]})),_:1})]})),_:1})}a("e9c4"),a("a434");var i={class:"card-header"},u=Object(n["createElementVNode"])("span",null,"卡牌激活",-1),l=Object(n["createTextVNode"])("新增"),s=Object(n["createTextVNode"])("批量导入"),d=Object(n["createTextVNode"])("选择文件"),p=Object(n["createElementVNode"])("div",{class:"el-upload__tip"},' 支持导入json文件,格式： {"arData": [{"date": "yy-mm-dd", cards: ["白羊": 2, "双子": 0, ......]}, ......]} ',-1),b={style:{color:"#f00"}},f=Object(n["createTextVNode"])("详情"),h=Object(n["createTextVNode"])("删除");function m(t,e,a,r,c,o){var m=Object(n["resolveComponent"])("el-button"),O=Object(n["resolveComponent"])("el-upload"),j=Object(n["resolveComponent"])("el-dialog"),v=Object(n["resolveComponent"])("el-date-picker"),g=Object(n["resolveComponent"])("el-table-column"),D=Object(n["resolveComponent"])("el-input-number"),x=Object(n["resolveComponent"])("el-table"),y=Object(n["resolveComponent"])("el-popover"),V=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createBlock"])(V,null,{header:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",i,[u,Object(n["createElementVNode"])("div",null,[Object(n["createVNode"])(m,{type:"text",onClick:o.addData},{default:Object(n["withCtx"])((function(){return[l]})),_:1},8,["onClick"]),Object(n["createVNode"])(m,{type:"text",onClick:e[0]||(e[0]=function(t){return c.dialogVisible=!0})},{default:Object(n["withCtx"])((function(){return[s]})),_:1}),Object(n["createVNode"])(j,{modelValue:c.dialogVisible,"onUpdate:modelValue":e[1]||(e[1]=function(t){return c.dialogVisible=t}),title:"卡牌激活记录导入"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{action:"#","auto-upload":!1,"file-list":c.fileList,"on-change":o.loadJsonFile},{tip:Object(n["withCtx"])((function(){return[p]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{size:"small",type:"primary"},{default:Object(n["withCtx"])((function(){return[d]})),_:1})]})),_:1},8,["file-list","on-change"]),Object(n["createElementVNode"])("div",b,Object(n["toDisplayString"])(c.tip),1)]})),_:1},8,["modelValue"])])])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(x,{data:o.arTableData,stripe:"",height:"743",style:{width:"100%"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{label:"激活时间"},{default:Object(n["withCtx"])((function(t){return[Object(n["createVNode"])(v,{modelValue:t.row.date,"onUpdate:modelValue":function(e){return t.row.date=e},type:"date",size:"mini",onChange:function(e){return o.changeData(t)},style:{width:"130px"}},null,8,["modelValue","onUpdate:modelValue","onChange"])]})),_:1}),Object(n["createVNode"])(g,{prop:"cost",label:"成本（含合成费用）"}),Object(n["createVNode"])(g,{prop:"income",label:"收益"}),Object(n["createVNode"])(g,{label:"操作",width:"100"},{default:Object(n["withCtx"])((function(t){return[Object(n["createVNode"])(y,{placement:"left",width:300,trigger:"click"},{reference:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{type:"text",size:"mini"},{default:Object(n["withCtx"])((function(){return[f]})),_:1})]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(x,{data:t.row.cards,style:{width:"100%"},height:"500"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{prop:"type",label:"卡牌"}),Object(n["createVNode"])(g,{label:"数量",width:"200"},{default:Object(n["withCtx"])((function(t){return[Object(n["createVNode"])(D,{modelValue:t.row.amount,"onUpdate:modelValue":function(e){return t.row.amount=e},min:0,onChange:e[2]||(e[2]=function(t){return o.changeData()})},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:2},1032,["data"])]})),_:2},1024),Object(n["createVNode"])(m,{type:"text",size:"mini",onClick:function(e){return o.removeData(t.$index)}},{default:Object(n["withCtx"])((function(){return[h]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1})}a("99af");function O(t){for(var e=0,a=0,n=0;n<t.length;n++){switch(t[n].type){case"天秤":case"天蝎":case"射手":case"摩羯":case"水瓶":case"双鱼":a+=4*t[n].amount;break;case"白羊":case"双子":case"巨蟹":a+=6*t[n].amount;break;case"金牛":case"狮子":a+=30*t[n].amount;break;case"处女":a+=100*t[n].amount;break;case"白羊+射手":case"双子+水瓶":case"巨蟹+双鱼":e+=3*t[n].amount,a+=15*t[n].amount;break;case"金牛+摩羯":e+=t[n].amount,a+=51*t[n].amount;break;case"天秤+天蝎":e+=t[n].amount,a+=16*t[n].amount;break;case"狮子+天蝎":e+=t[n].amount,a+=68*t[n].amount;break;case"处女+天秤":e+=t[n].amount,a+=208*t[n].amount;break;default:break}e+=2*t[n].amount}return{cost:e,income:a}}function j(){var t=new Date,e="".concat(t.getFullYear(),"-").concat(t.getMonth()+1,"-").concat(t.getDate());return e}function v(t,e){var a=t+" 00:00:00 GMT+0800",n=e+" 00:00:00 GMT+0800",r=new Date(a).getTime(),c=new Date(n).getTime();return(c-r)/864e5}function g(t,e){var a=new Date(new Date(t).getTime()+864e5*e);return"".concat(a.getFullYear(),"-").concat(a.getMonth()+1,"-").concat(a.getDate())}var D={props:["arData"],data:function(){return{dialogVisible:!1,fileList:[],tip:""}},methods:{loadJsonFile:function(t,e){var a=this;this.tip="",e.length>0&&(this.fileList=[e[e.length-1]]);var n=new FileReader;n.readAsText(t.raw),n.onload=function(t){try{var e=!1,n=JSON.parse(t.target.result)["arData"];if(n)for(var r=0;r<n.length;r++)if(n[r].date&&n[r].cards)for(var c=n[r].cards,o=0;o<c.length;o++)if(c[o].type)switch(c[o].type){case"白羊+射手":case"双子+水瓶":case"巨蟹+双鱼":case"金牛+摩羯":case"天秤+天蝎":case"狮子+天蝎":case"处女+天秤":case"白羊":case"金牛":case"双子":case"巨蟹":case"狮子":case"处女":case"天秤":case"天蝎":case"射手":case"摩羯":case"水瓶":case"双鱼":!c[o].amount&&0!=c[o].amount||"number"!==typeof c[o].amount?(e=!1,a.tip="arData[".concat(r,"].cards[").concat(o,"].amount属性格式错误或不存在"),console.log(a.tip)):e=!0;break;default:e=!1,a.tip="arData[".concat(r,"].cards[").concat(o,"].type属性格式错误"),console.log(a.tip);break}else e=!1,a.tip="arData[".concat(r,"].cards[").concat(o,"].amount属性格式不存在"),console.log(a.tip);else e=!1,a.tip="arData[".concat(r,"].date 或 arData[").concat(r,"].cards属性格式不存在"),console.log(a.tip);e&&a.$emit("changeData",n)}catch(i){a.tip="文件格式不正确!",console.log(a.tip)}}},changeData:function(t){var e=this.arData;if(t){var a=new Date(t.row.date);e[t.$index].date="".concat(a.getFullYear(),"-").concat(a.getMonth()+1,"-").concat(a.getDate())}this.$emit("changeData",e)},addData:function(){var t=this.arData;t.push({date:j(),cards:[{type:"白羊+射手",amount:0},{type:"双子+水瓶",amount:0},{type:"巨蟹+双鱼",amount:0},{type:"金牛+摩羯",amount:0},{type:"天秤+天蝎",amount:0},{type:"狮子+天蝎",amount:0},{type:"处女+天秤",amount:0},{type:"白羊",amount:0},{type:"金牛",amount:0},{type:"双子",amount:0},{type:"巨蟹",amount:0},{type:"狮子",amount:0},{type:"处女",amount:0},{type:"天秤",amount:0},{type:"天蝎",amount:0},{type:"射手",amount:0},{type:"摩羯",amount:0},{type:"水瓶",amount:0},{type:"双鱼",amount:0}]}),this.$emit("changeData",t)},removeData:function(t){var e=this.arData;e.splice(t,1),this.$emit("changeData",e)}},computed:{arTableData:function(){for(var t=[],e=0;e<this.arData.length;e++){var a=this.arData[e].date,n=O(this.arData[e].cards).cost,r=O(this.arData[e].cards).income,c=this.arData[e].cards,o={date:a,cost:n,income:r,cards:c};t.push(o)}return t}}},x=a("6b0d"),y=a.n(x);const V=y()(D,[["render",m]]);var w=V,C=Object(n["createElementVNode"])("div",{class:"card-header"},[Object(n["createElementVNode"])("span",null,"ME 产出预计")],-1);function N(t,e,a,r,c,o){var i=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createBlock"])(i,{class:"box-card"},{header:Object(n["withCtx"])((function(){return[C]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",{style:Object(n["normalizeStyle"])("height: ".concat(o.chartHeight,"px")),ref:"chart"},null,4)]})),_:1})}a("b680");var _=a("313e"),k={props:["arData","height"],data:function(){return{}},mounted:function(){this.init()},methods:{init:function(){var t=this,e=_["a"](this.$refs.chart),a={title:{},tooltip:{trigger:"axis",axisPointer:{type:"line",label:{backgroundColor:"#6a7985"}}},xAxis:{data:this.chartData().dateList},yAxis:{},series:[{name:"ME产出",type:"line",data:this.chartData().incomeList}],grid:{x:30,y:30,x2:30,y2:50}};e.setOption(a),window.addEventListener("resize",(function(){e.resize()})),setInterval((function(){e.setOption({xAxis:{data:t.chartData().dateList},series:[{name:"ME 产出",type:"line",data:t.chartData().incomeList}]})}),500)},chartData:function(){for(var t=[],e=[],a=j(),n=0;n<30;n++){for(var r=0,c=0;c<this.arData.length;c++){var o=v(this.arData[c].date,a);o>0-n&&o<=40-n&&(r+=O(this.arData[c].cards).income/40)}r=parseFloat(r.toFixed(4)),e.push(r),t.push(g(a,n))}return{incomeList:e,dateList:t}}},computed:{chartHeight:function(){var t=0;return t=this.height?parseInt(this.height)-100:300,t}}};const E=y()(k,[["render",N]]);var T=E,S=function(t){return Object(n["pushScopeId"])("data-v-3c0b3322"),t=t(),Object(n["popScopeId"])(),t},M=S((function(){return Object(n["createElementVNode"])("div",{class:"card-header"},[Object(n["createElementVNode"])("span",null,"信息概览")],-1)})),F={class:"number"},I=Object(n["createTextVNode"])(" ME "),L={class:"number"},B=Object(n["createTextVNode"])(" ME "),z={class:"number"},P=Object(n["createTextVNode"])(" ME "),$={class:"number"},A=Object(n["createTextVNode"])(" ME ");function J(t,e,a,r,c,o){var i=Object(n["resolveComponent"])("el-descriptions-item"),u=Object(n["resolveComponent"])("el-descriptions"),l=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createBlock"])(l,{class:"box-card"},{header:Object(n["withCtx"])((function(){return[M]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{border:"",column:1},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(i,{label:"产出总量"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",F,Object(n["toDisplayString"])(o.totalOutput),1),I]})),_:1}),Object(n["createVNode"])(i,{label:"已产出"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",L,Object(n["toDisplayString"])(o.outputed),1),B]})),_:1}),Object(n["createVNode"])(i,{label:"剩余未产出总量"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",z,Object(n["toDisplayString"])(o.notOutput),1),P]})),_:1}),Object(n["createVNode"])(i,{label:"明日产出"},{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("span",$,Object(n["toDisplayString"])(o.nextOutput),1),A]})),_:1})]})),_:1})]})),_:1})}var U={props:["arData"],computed:{totalOutput:function(){for(var t=0,e=0;e<this.arData.length;e++)t+=O(this.arData[e].cards).income;return t},outputed:function(){for(var t=0,e=j(),a=0;a<this.arData.length;a++){var n=v(this.arData[a].date,e);n>0&&n<=40?t+=O(this.arData[a].cards).income/40*n:n>40&&(t+=O(this.arData[a].cards).income)}return parseFloat(t.toFixed(4))},notOutput:function(){for(var t=0,e=j(),a=0;a<this.arData.length;a++){var n=v(this.arData[a].date,e);n<=0?t+=O(this.arData[a].cards).income:n>0&&n<=40&&(t+=O(this.arData[a].cards).income/40*(40-n))}return parseFloat(t.toFixed(4))},nextOutput:function(){for(var t=0,e=j(),a=0;a<this.arData.length;a++){var n=v(this.arData[a].date,e);n>-1&&n<=39&&(t+=O(this.arData[a].cards).income/40)}return parseFloat(t.toFixed(4))}}};a("01e8");const H=y()(U,[["render",J],["__scopeId","data-v-3c0b3322"]]);var R=H,Y=Object(n["createElementVNode"])("div",{class:"card-header"},[Object(n["createElementVNode"])("span",null,"卡牌类型比例")],-1),G={ref:"chart",style:{height:"315px"}};function q(t,e,a,r,c,o){var i=Object(n["resolveComponent"])("el-card");return Object(n["openBlock"])(),Object(n["createBlock"])(i,{class:"box-card"},{header:Object(n["withCtx"])((function(){return[Y]})),default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",G,null,512)]})),_:1})}a("b0c0"),a("ac1f"),a("1276");var K={props:["arData"],mounted:function(){this.init()},methods:{init:function(){var t=this,e=_["a"](this.$refs.chart);e.setOption({title:{},series:[{type:"pie",radius:["50%","70%"],center:["50%","50%"],color:["#63b2ee","#76da91","#f8cb7f","#f89588","#7cd6cf","#9192ab","#7898e1","#efa666","#eddd86","#9987ce","#63b2cc","#76da91"],data:this.chartData()}],tooltip:{trigger:"item",formatter:"{b} : {c} ({d}%)"}}),window.addEventListener("resize",(function(){e.resize()})),setInterval((function(){e.setOption({series:[{data:t.chartData()}]})}),500)},chartData:function(){for(var t=[{value:0,name:"白羊"},{value:0,name:"金牛"},{value:0,name:"双子"},{value:0,name:"巨蟹"},{value:0,name:"狮子"},{value:0,name:"处女"},{value:0,name:"天秤"},{value:0,name:"天蝎"},{value:0,name:"射手"},{value:0,name:"摩羯"},{value:0,name:"水瓶"},{value:0,name:"双鱼"}],e=0;e<this.arData.length;e++){for(var a=this.arData[e].cards,n=0;n<a.length;n++){for(var r=0;r<t.length;r++)t[r].name==a[n].type&&(t[r].value+=a[n].amount);var c="白羊+射手"==a[n].type||"双子+水瓶"==a[n].type||"巨蟹+双鱼"==a[n].type||"金牛+摩羯"==a[n].type||"天秤+天蝎"==a[n].type||"狮子+天蝎"==a[n].type||"处女+天秤"==a[n].type;if(c){var o=a[n].type.split("+")[0],i=a[n].type.split("+")[1];u(o,a[n].amount),u(i,a[n].amount)}}this.arData[e]}function u(e,a){for(var n=0;n<t.length;n++)t[n].name==e&&(t[n].value+=a)}for(var l=0;l<t.length;l++)0==t[l].value&&(t.splice(l,1),l--);return t}}};const Q=y()(K,[["render",q]]);var W=Q,X={name:"App",components:{ActivationRecord:w,ExpectedOutput:T,OutputInfo:R,CardRatio:W},data:function(){return{arData:[],helpInfo:{title:"使用指南",content:"添加激活的卡牌信息、数量以及日期，程序将会自动生成产出收益等相关信息。"}}},mounted:function(){var t=this;this.loadData(),window.addEventListener("beforeunload",(function(){t.saveData()}))},methods:{update:function(t){this.arData=t},saveData:function(){var t=JSON.stringify({arData:this.arData});localStorage.setItem("arData",t)},loadData:function(){if(localStorage.getItem("arData")){var t=JSON.parse(localStorage.getItem("arData"))["arData"];this.arData.splice[this.arData.length];for(var e=0;e<t.length;e++)this.arData.push(t[e])}}}};a("dd94");const Z=y()(X,[["render",o]]);var tt=Z,et=a("c3a1"),at=(a("7437"),Object(n["createApp"])(tt));at.use(et["a"]),at.mount("#app")},"86cf":function(t,e,a){},b531:function(t,e,a){},dd94:function(t,e,a){"use strict";a("b531")}});
//# sourceMappingURL=app.d8c7c1d5.js.map